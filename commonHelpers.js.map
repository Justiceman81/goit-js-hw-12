{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44348563-8832aea6e55efd6ddd80494f7';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const searchImg = async (query, page, per_page) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n    throw error;\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchImg } from './pixabay-api.js';\nimport { refs } from '../main.js';\n\nconst lightbox = new SimpleLightbox('.gallery a');\nconst listEl = document.querySelector('.img-list');\nexport function createElements(values) {\n  const gallery = refs.imgGallery;\n  const markup = values.hits\n    .map(value => {\n      return `<li class=\"list-el\">\n                <a href=\"${value.largeImageURL}\"><img src='${value.webformatURL}' alt='${value.tags}'></a>\n                <div class=\"content\">\n                    <div class=\"item\"><h3>Likes</h3><p>${value.likes}</p></div>\n                    <div class=\"item\"><h3>Views</h3><p>${value.views}</p></div>\n                    <div class=\"item\"><h3>Comments</h3><p>${value.comments}</p></div>\n                    <div class=\"item\"><h3>Downloads</h3><p>${value.downloads}</p></div>\n                </div>\n            </li>`;\n    })\n    .join('');\n  gallery.innerHTML = markup;\n  lightbox.refresh();\n}\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\nexport function showLoadMore() {\n  refs.loadMore.classList.remove('hidden');\n}\nexport function hideLoadMore() {\n  refs.loadMore.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchImg } from './js/pixabay-api.js';\nimport {\n  createElements,\n  showLoader,\n  hideLoader,\n  showLoadMore,\n  hideLoadMore,\n} from './js/render-functions.js';\n\nlet page = 1;\nlet searchQuery = null;\n\nexport const refs = {\n  formEl: document.querySelector('.form-el'),\n  inputEl: document.querySelector('.input-search'),\n  imgGallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMore: document.querySelector('.btn-load-more'),\n};\n\nrefs.formEl.addEventListener('submit', async event => {\n  event.preventDefault();\n  refs.imgGallery.innerHTML = '';\n  showLoader();\n  hideLoadMore();\n  page = 1;\n  searchQuery = event.currentTarget.elements['search'].value.trim();\n  try {\n    const res = await searchImg(searchQuery, page);\n    if (res.total > 0);\n    {\n      iziToast.success({\n        position: 'topRight',\n        message: `We find ${res.total} photos`,\n      });\n    }\n    if (res.total.length === 0) {\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    refs.imgGallery.innerHTML = createElements(res);\n    if (res.total > 12) {\n      showLoadMore();\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    event.target.reset();\n    hideLoader();\n  }\n});\n\nrefs.loadMore.addEventListener('click', async () => {\n  page++;\n  showLoadMore();\n  try {\n    const res = await searchImg(searchQuery, page);\n    refs.imgGallery.insertAdjacentHTML('beforeend', createElements(res));\n    // function scroll\n    const { height: cardHeight } = document\n      .querySelector('.img-list')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    //\n    const lastPage = Math.ceil(res.total / 15);\n    if (page === lastPage) {\n      hideLoadMore();\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["API_KEY","BASE_URL","searchImg","query","page","per_page","axios","error","lightbox","SimpleLightbox","createElements","values","gallery","refs","markup","value","showLoader","hideLoader","showLoadMore","hideLoadMore","searchQuery","event","res","iziToast","cardHeight","lastPage"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAY,MAAOC,EAAOC,EAAMC,IAAa,CACxD,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACP,CAAK,GACe,IACjB,OAAQG,EAAO,CACd,cAAQ,IAAIA,CAAK,EACXA,CACP,CACH,EClBMC,EAAW,IAAIC,EAAe,YAAY,EACjC,SAAS,cAAc,WAAW,EAC1C,SAASC,EAAeC,EAAQ,CACrC,MAAMC,EAAUC,EAAK,WACfC,EAASH,EAAO,KACnB,IAAII,GACI;AAAA,2BACcA,EAAM,aAAa,eAAeA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,yDAE1CA,EAAM,KAAK;AAAA,yDACXA,EAAM,KAAK;AAAA,4DACRA,EAAM,QAAQ;AAAA,6DACbA,EAAM,SAAS;AAAA;AAAA,kBAGvE,EACA,KAAK,EAAE,EACVH,EAAQ,UAAYE,EACpBN,EAAS,QAAO,CAClB,CACO,SAASQ,GAAa,CAC3BH,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CACO,SAASI,GAAa,CAC3BJ,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CACO,SAASK,GAAe,CAC7BL,EAAK,SAAS,UAAU,OAAO,QAAQ,CACzC,CACO,SAASM,GAAe,CAC7BN,EAAK,SAAS,UAAU,IAAI,QAAQ,CACtC,CCxBA,IAAIT,EAAO,EACPgB,EAAc,KAEX,MAAMP,EAAO,CAClB,OAAQ,SAAS,cAAc,UAAU,EACzC,QAAS,SAAS,cAAc,eAAe,EAC/C,WAAY,SAAS,cAAc,UAAU,EAC7C,OAAQ,SAAS,cAAc,SAAS,EACxC,SAAU,SAAS,cAAc,gBAAgB,CACnD,EAEAA,EAAK,OAAO,iBAAiB,SAAU,MAAMQ,GAAS,CACpDA,EAAM,eAAc,EACpBR,EAAK,WAAW,UAAY,GAC5BG,IACAG,IACAf,EAAO,EACPgB,EAAcC,EAAM,cAAc,SAAS,OAAU,MAAM,OAC3D,GAAI,CACF,MAAMC,EAAM,MAAMpB,EAAUkB,EAAahB,CAAI,EACzCkB,EAAI,MAAQ,EAEdC,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,WAAWD,EAAI,KAAK,SACrC,CAAO,EAECA,EAAI,MAAM,SAAW,GACvBC,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACV,CAAO,EAEHV,EAAK,WAAW,UAAYH,EAAeY,CAAG,EAC1CA,EAAI,MAAQ,IACdJ,GAEH,OAAQX,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRc,EAAM,OAAO,QACbJ,GACD,CACH,CAAC,EAEDJ,EAAK,SAAS,iBAAiB,QAAS,SAAY,CAClDT,IACAc,IACA,GAAI,CACF,MAAMI,EAAM,MAAMpB,EAAUkB,EAAahB,CAAI,EAC7CS,EAAK,WAAW,mBAAmB,YAAaH,EAAeY,CAAG,CAAC,EAEnE,KAAM,CAAE,OAAQE,CAAU,EAAK,SAC5B,cAAc,WAAW,EACzB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAED,MAAMC,EAAW,KAAK,KAAKH,EAAI,MAAQ,EAAE,EACrClB,IAASqB,IACXN,IACAI,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACjB,CAAO,EAEJ,OAAQhB,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRU,GACD,CACH,CAAC"}