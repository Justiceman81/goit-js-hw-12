{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// import axios from 'axios';\n// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n\n// export async function searchImg(query, page) {\n//   const BASE_URL = 'https://pixabay.com';\n//   const END_POINT = '/api/';\n//   const options = new URLSearchParams({\n//     key: '44348563-8832aea6e55efd6ddd80494f7',\n//     q: `${query}`,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     page,\n//     per_page: 15,\n//     safesearch: true,\n//   });\n//   const url = `${BASE_URL}${END_POINT}?${options}`;\n\n//   try {\n//     const res = await axios.get(url);\n//     return res.data;\n//   } catch (error) {\n//     iziToast.error({\n//       title: 'Error',\n//       message: `Something went wrong: ${error.message}`,\n//     });\n//     throw error;\n//   }\n// }\nimport axios from 'axios';\n\nconst API_KEY = '44348563-8832aea6e55efd6ddd80494f7';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const searchImg = async (query, page, perPage) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchImg } from './pixabay-api.js';\nimport { refs } from '../main.js';\n\nconst lightbox = new SimpleLightbox('.gallery a');\nconst listEl = document.querySelector('.img-list');\nexport function createElements(values) {\n  const gallery = refs.imgGallery;\n  const markup = values.hits\n    .map(value => {\n      return `<li class=\"list-el\">\n                <a href=\"${value.largeImageURL}\"><img src='${value.webformatURL}' alt='${value.tags}'></a>\n                <div class=\"content\">\n                    <div class=\"item\"><h3>Likes</h3><p>${value.likes}</p></div>\n                    <div class=\"item\"><h3>Views</h3><p>${value.views}</p></div>\n                    <div class=\"item\"><h3>Comments</h3><p>${value.comments}</p></div>\n                    <div class=\"item\"><h3>Downloads</h3><p>${value.downloads}</p></div>\n                </div>\n            </li>`;\n    })\n    .join('');\n  gallery.innerHTML = markup;\n  lightbox.refresh();\n}\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\nexport function showLoadMore() {\n  refs.loadMore.classList.remove('hidden');\n}\nexport function hideLoadMore() {\n  refs.loadMore.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchImg } from './js/pixabay-api.js';\nimport {\n  createElements,\n  showLoader,\n  hideLoader,\n  showLoadMore,\n  hideLoadMore,\n} from './js/render-functions.js';\n\nlet page = 1;\nlet searchQuery = '';\n\nexport const refs = {\n  formEl: document.querySelector('.form-el'),\n  inputEl: document.querySelector('.input-search'),\n  imgGallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMore: document.querySelector('.btn-load-more'),\n};\n\n// refs.formEl.addEventListener('submit', async e => {\n//   e.preventDefault();\n//   refs.imgGallery.innerHTML = '';\n//   showLoader();\n//   hideLoadMore();\n//   page = 1;\n//   // searchQuery = e.currentTarget.search.value.trim();\n\n//   const value = e.currentTarget.search.value.trim();\n\n//   if (!value) {\n//     iziToast.error({\n//       message: 'Info Search input must be filled!',\n//     });\n//     return;\n//   }\n\n//   try {\n//     const data = await searchImg(value);\n//     if (data.total > 0) {\n//       iziToast.success({\n//         position: 'topRight',\n//         message: `We find ${data.total} photos`,\n//       });\n//     }\n//     if (data.length === 0) {\n//       iziToast.error({\n//         position: 'topRight',\n//         message:\n//           'Sorry, there are no images matching your search query. Please try again!',\n//       });\n//     } else {\n//       createElements(data);\n//     }\n//     imgGallery.innerHTML = createElements(data);\n//     if (data.total > 15) {\n//       showLoadMore();\n//     }\n//   } catch (error) {\n//     iziToast.error({\n//       title: 'Sorry,',\n//       message:\n//         'there are no images matching your search query. Please try again!',\n//       color: 'red',\n//     });\n//   } finally {\n//     hideLoader();\n//     refs.formEl.reset();\n//   }\n// });\n\n// const perPage = 15;\n\n// refs.formEl.addEventListener('submit', async e => {\n//   e.preventDefault();\n//   refs.imgGallery.innerHTML = '';\n//   showLoader();\n//   hideLoadMore();\n//   page = 1; // Reset page for a new search\n//   const value = e.currentTarget.search.value.trim();\n\n//   if (!value) {\n//     iziToast.error({\n//       message: 'Поле пошуку повинно бути заповнене!',\n//       position: 'topRight',\n//     });\n//     hideLoader();\n//     return;\n//   }\n\n//   await searchImg();\n// });\n\n// refs.loadMore.addEventListener('click', async () => {\n//   page += 1;\n//   await searchImg();\n// });\n\n// const fetchImg = async () => {\n//   try {\n//     const response = await axios.get('https://pixabay.com/api/', {\n//       params: {\n//         key: 'YOUR_API_KEY',\n//         q: searchQuery,\n//         image_type: 'photo',\n//         orientation: 'horizontal',\n//         safesearch: true,\n//         page: page,\n//         per_page: perPage,\n//       },\n//     });\n\n//     const data = response.data;\n\n//     if (data.hits.length === 0 && page === 1) {\n//       iziToast.error({\n//         position: 'topRight',\n//         message:\n//           'Вибачте, немає зображень, що відповідають вашому запиту. Спробуйте ще раз!',\n//       });\n//     } else {\n//       createElements(data.hits);\n//       if (data.hits.length === perPage) {\n//         showLoadMore();\n//       } else {\n//         hideLoadMore();\n//       }\n//     }\n//   } catch (error) {\n//     iziToast.error({\n//       title: 'Вибачте,',\n//       message:\n//         'Немає зображень, що відповідають вашому запиту. Спробуйте ще раз!',\n//       color: 'red',\n//       position: 'topRight',\n//     });\n//   } finally {\n//     hideLoader();\n//     refs.formEl.reset();\n//   }\n// };\n// refs.loadMore.addEventListener('click', async () => {\n//   page++;\n//   showLoader();\n//   try {\n//     const res = await searchImg(query, page);\n//     console.log(query);\n//     refs.imgGallery.insertAdjacentHTML('beforeend', createElements(data));\n//     // function scroll\n//     const { height: cardHeight } = document\n//       .querySelector('.gallery')\n//       .firstElementChild.getBoundingClientRect();\n\n//     window.scrollBy({\n//       top: cardHeight * 2,\n//       behavior: 'smooth',\n//     });\n//     //\n//     const lastPage = Math.ceil(res.data.total / 12);\n//     if (page === lastPage) {\n//       hideLoadMore();\n//       iziToast.info({\n//         position: 'topRight',\n//         message: \"We're sorry, but you've reached the end of search results.\",\n//       });\n//     }\n//   } catch (error) {\n//     console.log(error);\n//   } finally {\n//     hideLoader();\n//   }\n// });\n\nrefs.formEl.addEventListener('submit', async e => {\n  e.preventDefault();\n  refs.imgGallery.innerHTML = '';\n  showLoader();\n  hideLoadMore();\n  page = 1; // Reset page for a new search\n  searchQuery = e.currentTarget.search.value.trim();\n\n  if (!searchQuery) {\n    iziToast.error({\n      message: 'Поле пошуку повинно бути заповнене!',\n      position: 'topRight',\n    });\n    hideLoader();\n    return;\n  }\n\n  await fetchImages();\n});\n\nrefs.loadMore.addEventListener('click', async () => {\n  page += 1;\n  await fetchImages();\n});\n\nconst fetchImages = async () => {\n  try {\n    const data = await searchImg(searchQuery, page);\n\n    if (data.hits.length === 0 && page === 1) {\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Вибачте, немає зображень, що відповідають вашому запиту. Спробуйте ще раз!',\n      });\n    } else {\n      createElements(data.hits);\n      if (data.hits.length === 15) {\n        showLoadMore();\n      } else {\n        hideLoadMore();\n      }\n      smoothScroll();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Вибачте,',\n      message:\n        'Немає зображень, що відповідають вашому запиту. Спробуйте ще раз!',\n      color: 'red',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n    if (page === 1) refs.formEl.reset();\n  }\n};\n\nconst smoothScroll = () => {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n"],"names":["API_KEY","BASE_URL","searchImg","query","page","perPage","axios","error","lightbox","SimpleLightbox","createElements","values","gallery","refs","markup","value","showLoader","hideLoader","showLoadMore","hideLoadMore","searchQuery","e","iziToast","fetchImages","data","smoothScroll","cardHeight"],"mappings":"owBA+BA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAY,MAAOC,EAAOC,EAAMC,IAAY,CACvD,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACP,CAAK,GACe,IACjB,OAAQG,EAAO,CACd,cAAQ,MAAMA,CAAK,EACbA,CACP,CACH,EC/CMC,EAAW,IAAIC,EAAe,YAAY,EACjC,SAAS,cAAc,WAAW,EAC1C,SAASC,EAAeC,EAAQ,CACrC,MAAMC,EAAUC,EAAK,WACfC,EAASH,EAAO,KACnB,IAAII,GACI;AAAA,2BACcA,EAAM,aAAa,eAAeA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,yDAE1CA,EAAM,KAAK;AAAA,yDACXA,EAAM,KAAK;AAAA,4DACRA,EAAM,QAAQ;AAAA,6DACbA,EAAM,SAAS;AAAA;AAAA,kBAGvE,EACA,KAAK,EAAE,EACVH,EAAQ,UAAYE,EACpBN,EAAS,QAAO,CAClB,CACO,SAASQ,GAAa,CAC3BH,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CACO,SAASI,GAAa,CAC3BJ,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CACO,SAASK,GAAe,CAC7BL,EAAK,SAAS,UAAU,OAAO,QAAQ,CACzC,CACO,SAASM,GAAe,CAC7BN,EAAK,SAAS,UAAU,IAAI,QAAQ,CACtC,CCxBA,IAAIT,EAAO,EACPgB,EAAc,GAEX,MAAMP,EAAO,CAClB,OAAQ,SAAS,cAAc,UAAU,EACzC,QAAS,SAAS,cAAc,eAAe,EAC/C,WAAY,SAAS,cAAc,UAAU,EAC7C,OAAQ,SAAS,cAAc,SAAS,EACxC,SAAU,SAAS,cAAc,gBAAgB,CACnD,EA2JAA,EAAK,OAAO,iBAAiB,SAAU,MAAMQ,GAAK,CAQhD,GAPAA,EAAE,eAAc,EAChBR,EAAK,WAAW,UAAY,GAC5BG,IACAG,IACAf,EAAO,EACPgB,EAAcC,EAAE,cAAc,OAAO,MAAM,KAAI,EAE3C,CAACD,EAAa,CAChBE,EAAS,MAAM,CACb,QAAS,sCACT,SAAU,UAChB,CAAK,EACDL,IACA,MACD,CAED,MAAMM,EAAW,CACnB,CAAC,EAEDV,EAAK,SAAS,iBAAiB,QAAS,SAAY,CAClDT,GAAQ,EACR,MAAMmB,EAAW,CACnB,CAAC,EAED,MAAMA,EAAc,SAAY,CAC9B,GAAI,CACF,MAAMC,EAAO,MAAMtB,EAAUkB,EAAahB,CAAI,EAE1CoB,EAAK,KAAK,SAAW,GAAKpB,IAAS,EACrCkB,EAAS,MAAM,CACb,SAAU,WACV,QACE,4EACV,CAAO,GAEDZ,EAAec,EAAK,IAAI,EACpBA,EAAK,KAAK,SAAW,GACvBN,IAEAC,IAEFM,IAEH,MAAe,CACdH,EAAS,MAAM,CACb,MAAO,WACP,QACE,oEACF,MAAO,MACP,SAAU,UAChB,CAAK,CACL,QAAY,CACRL,IACIb,IAAS,GAAGS,EAAK,OAAO,MAAK,CAClC,CACH,EAEMY,EAAe,IAAM,CACzB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}