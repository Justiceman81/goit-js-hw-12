{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44348563-8832aea6e55efd6ddd80494f7';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const searchImg = async (query, page) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n    throw error;\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs } from '../main.js';\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function createElements(values) {\n  return values\n    .map(value => {\n      return `<li class=\"list-el\">\n                <a href=\"${value.largeImageURL}\"><img src='${value.webformatURL}' alt='${value.tags}'></a>\n                <div class=\"content\">\n                    <div class=\"item\"><h3>Likes</h3><p>${value.likes}</p></div>\n                    <div class=\"item\"><h3>Views</h3><p>${value.views}</p></div>\n                    <div class=\"item\"><h3>Comments</h3><p>${value.comments}</p></div>\n                    <div class=\"item\"><h3>Downloads</h3><p>${value.downloads}</p></div>\n                </div>\n            </li>`;\n    })\n    .join('');\n}\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\nexport function showLoadMore() {\n  refs.loadMore.classList.remove('hidden');\n}\nexport function hideLoadMore() {\n  refs.loadMore.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImg } from './js/pixabay-api.js';\nimport {\n  createElements,\n  showLoader,\n  hideLoader,\n  showLoadMore,\n  hideLoadMore,\n} from './js/render-functions.js';\n\nlet page = 1;\nlet searchQuery = null;\nlet lightbox = new SimpleLightbox('.gallery a');\n\nexport const refs = {\n  formEl: document.querySelector('.form-el'),\n  inputEl: document.querySelector('.input-search'),\n  listEl: document.querySelector('.img-list'),\n  imgGallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMore: document.querySelector('.btn-load-more'),\n};\nrefs.formEl.addEventListener('submit', async e => {\n  e.preventDefault();\n  refs.imgGallery.innerHTML = '';\n  showLoader();\n  hideLoadMore();\n  page = 1;\n  searchQuery = e.currentTarget.elements['search'].value.trim();\n  try {\n    const res = await searchImg(searchQuery, page);\n    if (res.totalHits > 0) {\n      iziToast.success({\n        position: 'topRight',\n        message: `We found ${res.totalHits} photos`,\n      });\n    }\n    if (res.hits.length === 0) {\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    refs.imgGallery.innerHTML = createElements(res.hits);\n    lightbox.refresh();\n    if (res.totalHits > 15) {\n      showLoadMore();\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    e.target.reset();\n    hideLoader();\n  }\n});\n\nrefs.loadMore.addEventListener('click', async () => {\n  page++;\n  showLoader();\n  try {\n    const res = await searchImg(searchQuery, page);\n    const newElements = createElements(res.hits);\n    refs.imgGallery.insertAdjacentHTML('beforeend', newElements);\n    lightbox.refresh();\n\n    const cardHeight = document\n      .querySelector('.gallery')\n      .lastElementChild.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    const lastPage = Math.ceil(res.totalHits / 15);\n    if (page >= lastPage) {\n      hideLoadMore();\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["API_KEY","BASE_URL","searchImg","query","page","axios","error","SimpleLightbox","createElements","values","value","showLoader","refs","hideLoader","showLoadMore","hideLoadMore","searchQuery","lightbox","e","res","iziToast","newElements","cardHeight","lastPage"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAY,MAAOC,EAAOC,IAAS,CAC9C,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIJ,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,cAAQ,IAAIA,CAAK,EACXA,CACP,CACH,ECnBiB,IAAIC,EAAe,YAAY,EAEzC,SAASC,EAAeC,EAAQ,CACrC,OAAOA,EACJ,IAAIC,GACI;AAAA,2BACcA,EAAM,aAAa,eAAeA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,yDAE1CA,EAAM,KAAK;AAAA,yDACXA,EAAM,KAAK;AAAA,4DACRA,EAAM,QAAQ;AAAA,6DACbA,EAAM,SAAS;AAAA;AAAA,kBAGvE,EACA,KAAK,EAAE,CACZ,CACO,SAASC,GAAa,CAC3BC,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CACO,SAASC,GAAa,CAC3BD,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CACO,SAASE,GAAe,CAC7BF,EAAK,SAAS,UAAU,OAAO,QAAQ,CACzC,CACO,SAASG,GAAe,CAC7BH,EAAK,SAAS,UAAU,IAAI,QAAQ,CACtC,CClBA,IAAIR,EAAO,EACPY,EAAc,KACdC,EAAW,IAAIV,EAAe,YAAY,EAEvC,MAAMK,EAAO,CAClB,OAAQ,SAAS,cAAc,UAAU,EACzC,QAAS,SAAS,cAAc,eAAe,EAC/C,OAAQ,SAAS,cAAc,WAAW,EAC1C,WAAY,SAAS,cAAc,UAAU,EAC7C,OAAQ,SAAS,cAAc,SAAS,EACxC,SAAU,SAAS,cAAc,gBAAgB,CACnD,EACAA,EAAK,OAAO,iBAAiB,SAAU,MAAMM,GAAK,CAChDA,EAAE,eAAc,EAChBN,EAAK,WAAW,UAAY,GAC5BD,IACAI,IACAX,EAAO,EACPY,EAAcE,EAAE,cAAc,SAAS,OAAU,MAAM,OACvD,GAAI,CACF,MAAMC,EAAM,MAAMjB,EAAUc,EAAaZ,CAAI,EACzCe,EAAI,UAAY,GAClBC,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,YAAYD,EAAI,SAAS,SAC1C,CAAO,EAECA,EAAI,KAAK,SAAW,GACtBC,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACV,CAAO,EAEHR,EAAK,WAAW,UAAYJ,EAAeW,EAAI,IAAI,EACnDF,EAAS,QAAO,EACZE,EAAI,UAAY,IAClBL,GAEH,OAAQR,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRY,EAAE,OAAO,QACTL,GACD,CACH,CAAC,EAEDD,EAAK,SAAS,iBAAiB,QAAS,SAAY,CAClDR,IACAO,IACA,GAAI,CACF,MAAMQ,EAAM,MAAMjB,EAAUc,EAAaZ,CAAI,EACvCiB,EAAcb,EAAeW,EAAI,IAAI,EAC3CP,EAAK,WAAW,mBAAmB,YAAaS,CAAW,EAC3DJ,EAAS,QAAO,EAEhB,MAAMK,EAAa,SAChB,cAAc,UAAU,EACxB,iBAAiB,sBAAuB,EAAC,OAE5C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAED,MAAMC,EAAW,KAAK,KAAKJ,EAAI,UAAY,EAAE,EACzCf,GAAQmB,IACVR,IACAK,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACjB,CAAO,EAEJ,OAAQd,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRO,GACD,CACH,CAAC"}